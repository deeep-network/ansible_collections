---
ipfs_version: v0.29.0
ipfs_download_url:
  "https://dist.ipfs.tech/kubo/{{ ipfs_version }}\
  /kubo_{{ ipfs_version }}_{{ ansible_system | lower }}-{{ system_architecture }}.tar.gz"

# systemd
ipfs_private_network: false
ipfs_fd_max: 1000000
ipfs_enable_gc: false
ipfs_use_defaults: false
## dummy identity that'll be instantly rotated after init
ipfs_identity:
  PeerID: 12D3KooWCixTABwjSsxLxiz1Wm8gaVWYuUpfZvGZoNUXGjtoP5sr
  PrivKey: CAESQDBW7drToQeuXYTw8qV9P1Rr6z70L9Opv74UCMpPiIDfKzBXAIYPx07Et3W+wPJRoUuE/3O2/G9X6IjWjM/fy0U=

ipfs_datastore:
  StorageMax: 10GB
  StorageGCWatermark: 90
  BloomFilterSize: 1048576 # 1MB
  GCPeriod: 1h
  HashOnRead: false

ipfs_datastore_spec:
  shardFunc: "{{ ((ipfs_datastore.StorageMax | human_to_bytes) >= ('2TB' | human_to_bytes)) | ternary(3, 2) }}"
  sync: false

ipfs_addresses:
  API: /ip4/127.0.0.1/tcp/5001
  Announce: []
  Gateway: /ip4/127.0.0.1/tcp/8080
  NoAnnounce: []
  Swarm:
    - /ip4/0.0.0.0/tcp/4001
    - /ip6/::/tcp/4001
    - /ip4/0.0.0.0/udp/4001/quic-v1
    - /ip4/0.0.0.0/udp/4001/quic-v1/webtransport
    - /ip6/::/udp/4001/quic-v1
    - /ip6/::/udp/4001/quic-v1/webtransport

ipfs_discovery_mdns:
  Enabled: false
  Interval: 10

ipfs_routing:
  AcceleratedDHTClient: true
  Routers: null
  Methods: null

ipfs_bootstrap: []

ipfs_gateway:
  RootRedirect: null
  PublicGateways: null
  PathPrefixes: []
  APICommands: []
  NoFetch: false
  NoDNSLink: false
  DeserializedResponses: null

ipfs_api:
  HTTPHeaders: null

ipfs_swarm:
  AddrFilters: []
  DisableBandwidthMetrics: false
  DisableNatPortMap: true
  RelayClient: {}
  RelayService: {}
  Transports:
    Network: {}
    Security: {}
    Multiplexers: {}
  ConnMgr:
    Type: basic
    HighWater: &swarm_conn_mgr_highwater 200
    LowWater: "{{ (('*swarm_conn_mgr_highwater' | int) / 4) | int }}"
    GracePeriod: 30s
  ResourceMgr:
    MaxMemory: "{{ (ansible_memtotal_mb | human_to_bytes(default_unit='M') / 2) | int }}"

ipfs_reprovider:
  Interval: all
  Strategy: 12h

ipfs_experimental:
  FilestoreEnabled: false
  UrlstoreEnabled: false
  GraphsyncEnabled: false
  Libp2pStreamMounting: false
  P2pHttpProxy: false
  StrategicProviding: false
  OptimisticProvide: false
  OptimisticProvideJobsPoolSize: 0

ipfs_internal:
  Bitswap:
    EngineBlockstoreWorkerCount: 128
    EngineTaskWorkerCount: 8
    MaxOutstandingBytesPerPeer: 1MB
    TaskWorkerCount: 8
